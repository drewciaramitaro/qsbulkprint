<!DOCTYPE html>
<html>

<head>
    <!-- increment the v= if theres a css change, that way browsers will refresh their cache -->
    <link rel="stylesheet" href="../../qs/CSize.css?v=1001" />
    <link rel="stylesheet" href="../../bulk_shared.css?v=1016" />
    <link rel="stylesheet" href="../../bulk_c.css?v=1008" />
    <title>Bonus Point Sign - C Size</title>
    <link rel="icon" type="image/png" href="../../images/icon.png?v=01">
</head>

<body>
    <fieldset class="desktop tool">
        <legend>
            <div id="tool-head">
                <h1 class="head-txt" style="margin: 0;">Bonus Points - <span>C Size</span></h1>
            </div>
        </legend>
        <div style="margin:auto;margin-top: -15px;margin-bottom:12px; width: fit-content;display: flex;gap:4px">
            <a id="go-home" class="action more-tool-btn" href="../../index.html"><span></span><img width="100" src="../../images/home-icon.jpg" />Home</a>
        </div>

        <div style="display: flex;flex-direction: row;align-items: center;gap:8px">
            <button class="action" onclick="show_print_dialog()">Print</button>
        </div>
    </fieldset>

    <fieldset class="desktop tool">
        <legend>Edit Sign</legend>
        <div style="display: flex;flex-direction: column;gap:10px;width:200px">
            <div>
                <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Sale Price</span>
                <input id="sale-price-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="2.99"/>
            </div>
            <div>
                <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Regular Retail</span>
                <input id="retail-price-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="5.99"/>
            </div>
            <div>
                <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Bonus Points</span>
                <input id="bonus-point-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="1000"/>
            </div>
            <div>
                <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Must Buy For Bonus Pts</span>
                <input id="bonus-point-buy-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="1"/>
            </div>

            <div>
                <div>
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Unit Price Type</span>
                    <select id="unit-type-sel">
                        <optgroup label="Unit Price Type">
                            <option value="EACH">EACH</option>
                            <option value="POUND" selected>PER LB.</option>
                            <option value="QUART">PER QT.</option>
                            <option value="50 COUNT">PER 50 SQ. FT.</option>
                            <option value="100 COUNT">PER 100 CT.</option>
                        </optgroup>
                    </select>
                </div>
                <div>
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Unit Size(s)</span>
                    <input id="unit-sizes" style="width: 50px;" class="tool-input" autocomplete="off" value="16"/>
                    <span id="unit-size-suf" style="line-height: 35px;font-family: 'Trade Gothic Condensed'">ea</span>
                </div>

            </div>
        </div>
    </fieldset>


    <div class="print">
        <div id="print-container">
            <div id="c-sign">
                <div class="print-page">
                    <div id="outline">
                        <header class="noPrint">
                            Everyone <span>Loves to Save</span>
                        </header>
                        <div id="desBox">
                            <input id="mainDescription" class="editable-input" value="Click here to enter item name.">
                            <div id="altDescription">
                                <input class="editable-input" autocomplete="off" placeholder="CLICK TO ENTER DESCRIPTION" value="Click here to enter item description"/>
                            </div>
                            <input id="saleDate" class="editable-input" autocomplete="off" value="ON SALE NOW"/>
                        </div>
                        <div id="price">
                            <div id="pLeft" width="auto"></div>
                            <div id="priceBeforeDecimal">2</div>
                            <div id="priceAfterDecimal">99</div>
                            <div id="pRight"></div>
                        </div>
                        <footer>
                            <div id="unitBox">
                                <span style="font-family: 'Trade Gothic Bold Condensed';font-size:16px">UNIT PRICE</span>
                                <div id="unitPriceBox">19.99</div>
                                <div id="unitType">PER LB</div>
                            </div>
                            <div id="rightBox" style="bottom: 40px;height: 50px;">
                                <div id="mustBuy" style="height: 20px">
                                    <div id="MustBuyInner">
                                        <input class="editable-input" placeholder="CLICK TO ENTER MUST BUY / OTHER INFO"/>
                                    </div>
        
        
                                </div>
                                <div id="advCardDiv">
                                    <span class="with-adv">WITH <span>AdvantEdge</span> CARD</span>
                                    <span class="retail-price">Regular Retail: </span>
                                    <div id="retail">5.99</div>
                                </div>
                                <div id="youSaveBoxDiv" style="display: flex;">           
                                    <div style="display: grid;grid-template-columns: 50px 80px;background-color: black;">             
                                        <span style="padding-left:6px" class="yousave">YOU SAVE</span>
                                        <div style="display: flex;">
                                            <div id="youSavePriceMain" style="padding-left: 10px;">3</div>
                                            <div id="youSavePriceAlt">99</div>
                                        </div>
                                    </div>   
                                    <div id="youSaveImg" style="width: 182px;grid-template-columns: 100px 50px 30px 0px;background: none;border: 1px solid black;">
                                        <span id="bonus-pt" style="color:black;font-size: 38px;margin-right: 4px;margin-top: -2px;text-align: right;">1000</span>
                                        <span style="color:black;font-family: 'Trade Gothic Condensed';margin-top: 2px;">BONUS POINTS</span>
                                        <div id="whenYouBuy" style="color: black;">
                                            <p style="margin-top: 1px; margin-bottom: 2px;">WHEN</p>
                                            <p style="margin-top: -5px; margin-bottom: 1px;">YOU</p>
                                            <div style="margin-top: -4px;" id="spanWhenYouBuy">BUY 3</div>
                                        </div>
                                    </div>
                                </div>
                                <input class="editable-input" id="mixMatch" style="font-family: Trade Gothic Condensed;width: 100%;" value="LIMIT (click here) OF THIS BONUS POINT OFFER PER TRANSACTION">
                            </div>
                        </footer>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="error-popup-wrap" class="error-popup-wrapper">
        <div class="error-popup">
            <h3>Error</h3>
            <p id="error-msg">Error Message.</p>

            <button onclick="hide_error_popup()" class="action" id="close-error">OK</button>
        </div>
    </div>

    <div id="print-dialog">
        <div class="error-popup">
            <h3>Confirm Print</h3>
            <p>You are about to print <span id="print-count"></span> signs.</p>
            <p>Make sure you load at least <span id="print-count"></span> signs before confirming.</p>

            <h3>Important!</h3>
            <h4>The following options MUST be set or your signs will not print correctly.</h4>
            <div>
                <div>
                    <ul>
                        <li>
                            <p>Layout: <span>Portrait</span></p>
                        </li>
                        <p style="text-align: left;"><span>More Settings <svg width="20" height="20" viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg" class="c0183">
                                    <path
                                        d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.15 8.35a.5.5 0 01.7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z">
                                    </path>
                                </svg></span></p>
                        <li>
                            <p>Paper Size: <span>Letter</span></p>
                        </li>
                        <li>
                            <p>Scale (%): <span>Actual size</span></p>
                        </li>
                        <li>
                            <p>Margins: <span>Default</span></p>
                        </li>
                        <li>
                            <p>Options: Headers and Footers: <span>UNCHECKED</span></p>
                        </li>
                        <li>
                            <p>Options: Background Graphics: <span>UNCHECKED</span></p>
                        </li>
                    </ul>
                </div>
                <img id="printer-instructions-img" src="../../images/c.svg">
            </div>
            <button onclick="cancel_print()" class="action">Cancel</button>
            <button onclick="confirm_print()" class="action">Confirm</button>
        </div>
    </div>

    <script>
        
        const print_container = document.getElementById("print-container")
        const sign_template = document.getElementById("c-sign")

        function refresh(){
            function setSavings(priceDifference) {
                priceDifference = parseFloat(priceDifference).toFixed(2)
                if (priceDifference >= 1.0) {
                    document.querySelector("#youSavePriceMain").innerHTML = priceDifference.toString().split('.')[0];
                    document.querySelector("#youSavePriceAlt").innerHTML = priceDifference.toString().split('.')[1];
                    if(priceDifference.toString().split('.')[1] == '00'){
                        document.querySelector("#youSavePriceMain").innerHTML = `<span style='font-size: 20px;line-height: 35px;vertical-align: text-top;'>$</span>${ priceDifference.toString().split('.')[0]}`
                        document.querySelector("#youSavePriceAlt").innerHTML = '';
                    }
                }
                else {
                    document.querySelector("#youSavePriceMain").innerHTML = priceDifference.toString().split('.')[1];
                    document.querySelector("#youSavePriceAlt").innerHTML = ''
                    document.querySelector("#youSavePriceAlt").innerHTML = 'Â¢';
                }
            }

            const retailPrice = document.querySelector('#retail-price-input').value;
            const salePrice = document.querySelector('#sale-price-input').value;
            
            setSavings(parseFloat(retailPrice) - parseFloat(salePrice));

            document.querySelector('#bonus-pt').innerHTML = document.querySelector('#bonus-point-input').value;
            document.querySelector('#retail').innerHTML = retailPrice;

            const [dollars, cents] = salePrice.split('.')
            document.querySelector("#priceBeforeDecimal").innerHTML = dollars
            document.querySelector("#priceBeforeDecimal").style.width = "69%"
            document.querySelector("#priceAfterDecimal").innerHTML = cents

            const mustBuyForPts = document.querySelector('#bonus-point-buy-input').value
            if (mustBuyForPts <=1){
                document.querySelector('#whenYouBuy').style.display = 'none'
                document.querySelector('#youSaveImg').style.gridTemplateColumns = '130px 50px 30px 0px'
            }
            else{
                
                document.querySelector('#whenYouBuy').style.display = 'block'
                document.querySelector('#youSaveImg').style.gridTemplateColumns = '100px 50px 30px 0px'
                document.querySelector('#spanWhenYouBuy').innerHTML = `BUY ${document.querySelector('#bonus-point-buy-input').value}`
            }
                        // unit price
            let unitType = document.querySelector('#unit-type-sel').value;
            let unitString = "";
            const suffix = getUnitSuffix(unitType);
            const unit = getUnit(unitType);
            unitAmt = document.querySelector('#unit-sizes').value
            // If we have multiple unit sizes
            if (unitAmt.includes(',')) {
                const sizes = unitAmt.split(',');
                sizes.forEach(size => {
                    unitString += `${size} ${unit}/${calcUnitPrice(size, unitType, parseFloat(salePrice), parseFloat(retailPrice), null, 1)} ${suffix}<br/>`
                });
                document.querySelector("#unitType").style.display = "None";
                document.querySelector("#unitPriceBox").style.fontSize = "13px";
                document.querySelector("#unitPriceBox").style.fontFamily = "Trade Gothic Condensed"
            }
            else {
                unitString = `${calcUnitPrice(unitAmt, unitType, parseFloat(salePrice), parseFloat(retailPrice), null, 1)}`;
                document.querySelector("#unitType").style.display = "block";
                document.querySelector("#unitType").innerHTML = suffix;
                document.querySelector("#unitPriceBox").style.fontSize = "30px";
                document.querySelector("#unitPriceBox").style.fontFamily = "Rockwell";
            }

            document.querySelector("#unitPriceBox").innerHTML = unitString;

            document.querySelector('#unit-size-suf').innerHTML = unit || '';
        }

        document.querySelectorAll('.tool-input').forEach(e=>{e.addEventListener('input', function() {
            refresh();
        })})

        document.querySelector('#unit-type-sel').addEventListener('change', function(){refresh();});

   </script>

    <script src="../../bulk_shared.js?v=1003"></script>
    <script src="../../sign_builder.js?v=1000"></script>
    <script>
        refresh();
    </script>
</body>

</html>