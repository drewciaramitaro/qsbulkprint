<!DOCTYPE html>
<html>

<head>
    <!-- increment the v= if theres a css change, that way browsers will refresh their cache -->
    <link rel="stylesheet" href="../../qs/BSize.css?v=1002" />
    <link rel="stylesheet" href="../../bulk_shared.css?v=1021" />
    <link rel="stylesheet" href="../../bulk_b.css?v=1009" />
    <title>Bonus Points Signs - B Size</title>
    <link rel="icon" type="image/png" href="../../images/icon.png?v=01">
    <style>
        @media print{
            #c-sign{margin-top: -30px;}
        }
    </style>
</head>

<body>
    <fieldset class="desktop tool">
        <legend>
            <div id="tool-head">
                <h1 class="head-txt" style="margin: 0;">Bonus Points Sign - <span>B Size</span></h1>
            </div>
        </legend>
        <div style="margin:auto;margin-top: -15px;margin-bottom:12px; width: fit-content;display: flex;gap:4px">
            <a id="go-home" class="action more-tool-btn" href="../customsigns.html"><span></span><img width="100" src="../../images/spec_sign_icon.jpg" />Back to Sign List</a>
        </div>

        <div style="display: flex;flex-direction: row;align-items: center;gap:8px">
            <button class="action" onclick="show_print_dialog()">Print</button>
        </div>
    </fieldset>

    <div class="desktop tool">
        <legend>Edit Sign</legend>
        <div style="display: flex;gap:10px;">
            <fieldset style="display: flex;flex-direction: column;gap:10px;width:200px">
                <legend>Choose your Sign Type</legend>
                <div>
                    <input type="checkbox" id="on-sale-sel" checked style="display: none;" onchange="refresh()">
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Sign Type</span>
                        <div>
                        <button id="_onSale" class="action" style="background-color: green;"
                            onclick="{
                                document.querySelector('#_onSale').style.backgroundColor ='green';
                                document.querySelector('#on-sale-sel').checked = true;
                                refresh();
                            }"
                        >On Sale</button>
                    </div>
                </div>
                <div style="display: none;">
                    <input type="checkbox" id="per-lb-sel" style="cursor:pointer" onchange="refresh()">
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Per LB?</span>
                </div>
                <div>
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Price Type</span>
                    <select id="price-type-sel" onchange="refresh()">
                        <optgroup label="Price Type">
                            <option value="NORMAL" selected>Dollars or Cents</option>
                            <option value="XFORX" >X/$XX</option>
                            <option value="BOGO">Buy One, Get One</option>
                            <option value="B1G2">Buy One, Get Two</option>
                            <option value="B2G1">Buy Two, Get One</option>
                            <option value="B2G2">Buy Two, Get Two</option>
                        </optgroup>
                    </select>
                </div>
            </fieldset>
            <fieldset style="display: flex;flex-direction: column;gap:10px;width:200px">
                <legend>Item Pricing</legend>
                <div id="sale-price-box">
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Sale Price</span>
                    <input id="sale-price-input" inputmode="decimal" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="2.99"/>
                </div>
                <div id="sale-price-box-xforx">
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Sale Price</span>
                    <input id="sale-price-input-xforx1" style="width: 50px;" class="tool-input" autocomplete="off" value="2"/>
                    <span style="font-family: Trade Gothic LT;font-weight: bold;">/$</span>
                    <input id="sale-price-input-xforx2" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="5"/>
                </div>
                
                <div id="retail-price-box">
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Regular Retail</span>
                    <input id="retail-price-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="5.99"/>
                </div>
            </fieldset>
            <fieldset>
                <legend>Unit Pricing</legend>
                <div id="unit-option-box">
                    <div>
                        <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Unit Price Type</span>
                        <select id="unit-type-sel" onchange="refresh()">
                            <optgroup label="Unit Price Type">
                                <option value="EACH">EACH</option>
                                <option value="POUND" selected>PER LB.</option>
                                <option value="QUART">PER QT.</option>
                                <option value="50 COUNT">PER 50 SQ. FT.</option>
                                <option value="100 COUNT">PER 100 CT.</option>
                            </optgroup>
                        </select>
                    </div>
                    <div id="unit-size-box">
                        <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Unit Size(s)</span>
                        <input id="unit-sizes" style="width: 50px;" class="tool-input" autocomplete="off" value="16"/>
                        <span id="unit-size-suf" style="line-height: 35px;font-family: 'Trade Gothic Condensed'">ea</span>
                    </div>

                </div>
            </fieldset>
            <fieldset style="display: flex;flex-direction: column;gap:10px;width:200px">
                <legend>Bonus Points</legend>
                <div>
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Bonus Points</span>
                    <input id="bonus-point-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="1000"/>
                </div>
                <div>
                    <span style="line-height: 35px;font-family: 'Trade Gothic Condensed';">Must Buy For Bonus Pts</span>
                    <input id="bonus-point-buy-input" style="float: right;width: 50px;" class="tool-input" autocomplete="off" value="1"/>
                </div>
            </fieldset>
        </div>
        <span style="font-family: Trade Gothic Condensed;">Hint: Hold ALT and press 7 on the number pad to add the '•' symbol in the text boxes</span>
    </div>


    <div class="print">
        <div id="print-container">
            <div id="c-sign">
                <div class="print-page">
                    <div id="outline">
                        <header class="noPrint">
                            Everyone <span>Loves to Save</span>
                        </header>
                        <div id="desBox">
                            <input id="mainDescription" class="editable-input" autocomplete="off" placeholder="Click here to enter item name.">
                            <div id="altDescription">
                                <input class="editable-input" autocomplete="off" placeholder="CLICK TO ENTER DESCRIPTION"/>
                            </div>
                            <input id="saleDate" class="editable-input" autocomplete="off" value="ON SALE NOW" placeholder="Click to enter a sale date"/>
                        </div>
                        <div id="price" dollar>
                            <div id="pLeft" width="auto"></div>
                            <div id="priceBeforeDecimal" style="width: 74%; margin-top: -85px;">2</div>
                            <div id="priceAfterDecimal" style="width: 25%; margin-top: -41px;">99</div>
                            <div id="pRight"></div>
                            <!-- <div id="lb-lbl" style="font-family: 'Trade Gothic Condensed';letter-spacing: normal;top: 50px;left: 90%;position: relative;font-size: 25px;">lb.</div> -->
                        </div>
                        <div id="price" xforx style="display: none;">
                            <div id="pLeft" width="auto"></div>
                            <div id="priceBeforeDecimal" style="width:95%; margin-top: -85px;">
                                <span style="font-size: 170px;vertical-align: text-top;position:relative;top: 45px;" id="xforxval">2/$</span><span id="xforxprice" style="letter-spacing: -8px;">4</span>
                            </div>
                            <div id="pRight"></div>
                        </div>
                        <div id="price" bogo style="display: none;">
                            <div id="priceBeforeDecimal" style="width: 95%;"><img src="../../images/bogo.svg" height="250" style="margin-top: 15px;"></div>
                        </div>
                        <footer style="overflow: visible;">
                            <div id="unitBox">
                                <span style="font-family: 'Trade Gothic Bold Condensed';font-size:22px">UNIT PRICE</span>
                                <div id="unitPriceBox">19.99</div>
                                <div id="unitType">PER LB</div>
                            </div>
                            <div id="rightBox" style="bottom: 4px">
                                <div id="mustBuy" style="height: 20px">
                                    <div id="MustBuyInner">
                                        <input class="editable-input" placeholder="CLICK TO ENTER MUST BUY / OTHER INFO"/>
                                    </div>
        
        
                                </div>
                                <div id="advCardDiv">
                                    <span class="with-adv">WITH <span>AdvantEdge</span> CARD</span>
                                    <span class="retail-price">Regular Retail: </span>
                                    <div id="retail">5.99</div>
                                </div>
                                <div id="youSaveBoxDiv" style="display: flex;">           
                                    <div style="display: grid;grid-template-columns:80px 120px 48px;background-color: black;">             
                                        <span style="padding-left:6px" class="yousave">YOU SAVE</span>
                                        <div style="display: flex;">
                                            <div id="youSavePriceMain" style="padding-left: 10px;">3</div>
                                            <div id="youSavePriceAlt">99</div>
                                        </div>
                                        <div id="whenYouBuy" style="color: white;display: none">
                                            <p style="margin-top: 1px; margin-bottom: 2px;">WHEN</p>
                                            <p style="margin-top: -5px; margin-bottom: 1px;">YOU</p>
                                            <div style="margin-top: -4px;" id="spanWhenYouBuy">BUY 3</div>
                                        </div>
                                    </div>
                                    <div id="youSaveImg" style="grid-template-columns: 149px 69px 58px;background: none;border: 1px solid black;">
                                        <span id="bonus-pt" style="color:black;font-size: 58px;margin-right: 4px;margin-top: -2px;text-align: right;">1000</span>
                                        <span style="color:black;font-family: 'Trade Gothic Condensed';margin-top: 2px;font-size:25px">BONUS POINTS</span>
                                        <div id="whenYouBuyPt" style="color: black;font-family: Trade Gothic Condensed;">
                                            <p style="margin-top: 6px;margin-bottom: 2px;">WHEN</p>
                                            <p style="margin-top: -5px; margin-bottom: 1px;">YOU</p>
                                            <div style="margin-top: -4px;" id="spanWhenYouBuyPt">BUY 3</div>
                                        </div>
                                    </div>   
                                </div>
                                <input class="editable-input" id="mixMatch" autocomplete="off" style="font-family: Trade Gothic Condensed;width: 100%;" placeholder="Click here to enter LIMIT # OF THIS BONUS POINT OFFER PER TRANSACTION">
                            </div>
                        </footer>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="error-popup-wrap" class="error-popup-wrapper">
        <div class="error-popup">
            <h3>Error</h3>
            <p id="error-msg">Error Message.</p>

            <button onclick="hide_error_popup()" class="action" id="close-error">OK</button>
        </div>
    </div>

    <div id="print-dialog">
        <div class="error-popup">
            <h3>Confirm Print</h3>
            <p>You are about to print <span id="print-count"></span> signs.</p>
            <p>Make sure you load at least <span id="print-count"></span> signs before confirming.</p>

            <h3>Important!</h3>
            <h4>The following options MUST be set or your signs will not print correctly.</h4>
            <div>
                <div>
                    <ul>
                        <li>
                            <p>Layout: <span>Portrait</span></p>
                        </li>
                        <p style="text-align: left;"><span>More Settings <svg width="20" height="20" viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg" class="c0183">
                                    <path
                                        d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.15 8.35a.5.5 0 01.7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z">
                                    </path>
                                </svg></span></p>
                        <li>
                            <p>Paper Size: <span>Letter</span></p>
                        </li>
                        <li>
                            <p>Scale (%): <span>Actual size</span></p>
                        </li>
                        <li>
                            <p>Margins: <span>Default</span></p>
                        </li>
                        <li>
                            <p>Options: Headers and Footers: <span>UNCHECKED</span></p>
                        </li>
                        <li>
                            <p>Options: Background Graphics: <span>UNCHECKED</span></p>
                        </li>
                    </ul>
                </div>
                <img id="printer-instructions-img" src="../../images/b.svg">
            </div>
            <button onclick="cancel_print()" class="action">Cancel</button>
            <button onclick="confirm_print()" class="action">Confirm</button>
        </div>
    </div>

    <script>
        
        const print_container = document.getElementById("print-container")
        const sign_template = document.getElementById("c-sign")

        function refresh(){
            function setSavings(priceDifference, _mustBuy = 0) {
                priceDifference = parseFloat(priceDifference).toFixed(2)
                if (priceDifference >= 1.0) {
                    document.querySelector("#youSavePriceMain").innerHTML = priceDifference.toString().split('.')[0];
                    document.querySelector("#youSavePriceAlt").innerHTML = priceDifference.toString().split('.')[1];
                    if(priceDifference.toString().split('.')[1] == '00'){
                        document.querySelector("#youSavePriceMain").innerHTML = `<span style='font-size: 20px;line-height: 35px;vertical-align: text-top;'>$</span>${ priceDifference.toString().split('.')[0]}`
                        document.querySelector("#youSavePriceAlt").innerHTML = '';
                    }
                }
                else {
                    document.querySelector("#youSavePriceMain").innerHTML = priceDifference.toString().split('.')[1];
                    document.querySelector("#youSavePriceAlt").innerHTML = ''
                    document.querySelector("#youSavePriceAlt").innerHTML = '¢';
                }

                if(_mustBuy){
                    document.querySelector('#whenYouBuy').style.display = 'block';
                    document.querySelector('#spanWhenYouBuy').innerHTML = 'BUY '+_mustBuy
                }else{
                    document.querySelector('#whenYouBuy').style.display = 'none';
                }
            }
            if(document.querySelector('#unit-type-sel').value === "EACH"){
                document.querySelector('#unit-size-box').style.display = 'none'
            }
            else{
                document.querySelector('#unit-size-box').style.display = 'block'
            }

            
            let retailPrice = document.querySelector('#retail-price-input').value;
            let salePrice = document.querySelector('#sale-price-input').value;
            
            // PRICE TYPE
            const priceType = document.querySelector("#price-type-sel").value;
            if(priceType === "XFORX"){
                document.querySelector('#sale-price-box').style.display = 'none'
                document.querySelector('#sale-price-box-xforx').style.display = 'block'
                document.querySelector("#price[dollar]").style.display = 'none'
                document.querySelector("#price[xforx]").style.display = 'unset'
                document.querySelector("#price[bogo]").style.display = 'none'
                document.querySelector("#MustBuyInner").style.display = 'block'

                document.querySelector("#price[xforx] #xforxval").innerHTML = document.querySelector("#sale-price-input-xforx1").value + '/$'
                document.querySelector("#price[xforx] #xforxprice").innerHTML = document.querySelector("#sale-price-input-xforx2").value
                
                const buyAmt = parseInt(document.querySelector("#sale-price-input-xforx1").value)
                const buyForAmt = parseInt(document.querySelector("#sale-price-input-xforx2").value)

                salePrice = buyForAmt / buyAmt

                setSavings((parseFloat(retailPrice)*buyAmt) - (parseFloat(salePrice)*buyAmt), buyAmt);
            }
            else if (priceType == "BOGO"){
                document.querySelector('#sale-price-box').style.display = 'none'
                document.querySelector('#sale-price-box-xforx').style.display = 'none'
                document.querySelector("#price[dollar]").style.display = 'none'
                document.querySelector("#price[xforx]").style.display = 'none'
                document.querySelector("#price[bogo]").style.display = 'block'
                document.querySelector('#priceBeforeDecimal img').src = "../../images/bogo.svg"
                document.querySelector("#MustBuyInner").style.display = 'none'
                setSavings(retailPrice, 2)
            }            
            else if (priceType == "B2G1"){
                document.querySelector('#sale-price-box').style.display = 'none'
                document.querySelector('#sale-price-box-xforx').style.display = 'none'
                document.querySelector("#price[dollar]").style.display = 'none'
                document.querySelector("#price[xforx]").style.display = 'none'
                document.querySelector("#price[bogo]").style.display = 'block'
                document.querySelector('#priceBeforeDecimal img').src = "../../images/b2g1.svg"
                document.querySelector("#MustBuyInner").style.display = 'none'
                setSavings(retailPrice, 3)
            }            
            else if (priceType == "B2G2"){
                document.querySelector('#sale-price-box').style.display = 'none'
                document.querySelector('#sale-price-box-xforx').style.display = 'none'
                document.querySelector("#price[dollar]").style.display = 'none'
                document.querySelector("#price[xforx]").style.display = 'none'
                document.querySelector("#price[bogo]").style.display = 'block'
                document.querySelector('#priceBeforeDecimal img').src = "../../images/b2g2.svg"
                document.querySelector("#MustBuyInner").style.display = 'none'
                setSavings(retailPrice*2, 4)
            }
            else if (priceType == "B1G2"){
                document.querySelector('#sale-price-box').style.display = 'none'
                document.querySelector('#sale-price-box-xforx').style.display = 'none'
                document.querySelector("#price[dollar]").style.display = 'none'
                document.querySelector("#price[xforx]").style.display = 'none'
                document.querySelector("#price[bogo]").style.display = 'block'
                document.querySelector('#priceBeforeDecimal img').src = "../../images/b1g2.svg"
                document.querySelector("#MustBuyInner").style.display = 'none'
                setSavings(retailPrice*2, 3)
            }
            else{
                document.querySelector('#sale-price-box').style.display = 'block'
                document.querySelector('#sale-price-box-xforx').style.display = 'none'
                
                document.querySelector("#price[dollar]").style.display = 'unset'
                document.querySelector("#price[xforx]").style.display = 'none'
                document.querySelector("#price[bogo]").style.display = 'none'
                document.querySelector("#MustBuyInner").style.display = 'block'
                
                setSavings(parseFloat(retailPrice) - parseFloat(salePrice));
            }


            if(document.querySelector("#per-lb-sel").checked){
                document.querySelector("#unit-option-box").style.display = 'none'
                document.querySelector("#unit-size-box").value = '16'
                
                document.querySelector("#unit-type-sel").value = 'POUND'
            }
            else{
                document.querySelector("#unit-option-box").style.display = 'block'
            }

            if(!document.querySelector("#on-sale-sel").checked){
                document.querySelector('#advCardDiv').style.display='none';
                document.querySelector('#youSaveBoxDiv').style.display='none';
                document.querySelector('#saleDate').value = '';
                document.querySelector("#retail-price-box").style.display = 'none';
                document.querySelector("#sale-price-box span").innerHTML = "Item Price";
                document.querySelector("#sale-price-box-xforx span").innerHTML = "Item Price";
            }
            else{
                document.querySelector('#advCardDiv').style.display='inline-block';
                document.querySelector('#youSaveBoxDiv').style.display='flex';
                document.querySelector('#saleDate').value = '';
                document.querySelector("#retail-price-box").style.display = 'block';
                document.querySelector("#sale-price-box span").innerHTML = "Sale Price";
                document.querySelector("#sale-price-box-xforx span").innerHTML = "Sale Price";
            }
            

            document.querySelector('#retail').innerHTML = retailPrice;

            const [dollars, cents] = salePrice.toString().split('.')
            document.querySelector("#priceBeforeDecimal").innerHTML = dollars
            document.querySelector("#priceAfterDecimal").innerHTML = cents
            if (parseFloat(salePrice) < 1){  
                document.querySelector("#priceBeforeDecimal").innerHTML = cents;
                document.querySelector("#priceAfterDecimal").innerHTML = "¢";

                document.querySelector("#priceBeforeDecimal").style.width = "80%";
                document.querySelector("#priceAfterDecimal").style.width = "20%";
            }
            else{
                document.querySelector("#priceBeforeDecimal").style.width = "74%";
                document.querySelector("#priceAfterDecimal").style.width = "25%";
            }
            document.querySelector("#bonus-pt").innerHTML = document.querySelector("#bonus-point-input").value;
            const mustBuyForPts = document.querySelector('#bonus-point-buy-input').value;
            if (mustBuyForPts <=1){
                document.querySelector('#whenYouBuyPt').style.display = 'none';
                document.querySelector('#youSaveImg').style.gridTemplateColumns = '138px 69px 58px';
                document.querySelector('#youSaveImg').style.width = '213px'
            }
            else{
                
                document.querySelector('#whenYouBuyPt').style.display = 'block'
                document.querySelector('#youSaveImg').style.width = '261px'
                document.querySelector('#youSaveImg').style.gridTemplateColumns = '149px 69px 58px';
                document.querySelector('#spanWhenYouBuyPt').innerHTML = `BUY ${document.querySelector('#bonus-point-buy-input').value}`
            }
                        // unit price
            let unitType = document.querySelector('#unit-type-sel').value;
            let unitString = "";
            const suffix = getUnitSuffix(unitType);
            const unit = getUnit(unitType);
            unitAmt = document.querySelector('#unit-sizes').value
            if(unitType == "EACH"){
                unitAmt = "1"
            }
            // If we have multiple unit sizes
            if (unitAmt.includes(',')) {
                const sizes = unitAmt.split(',');
                sizes.forEach(size => {
                    unitString += `${size} ${unit}/${calcUnitPrice(size, unitType, parseFloat(salePrice), parseFloat(retailPrice), null, 1)} ${suffix}<br/>`
                });
                document.querySelector("#unitType").style.display = "None";
                document.querySelector("#unitPriceBox").style.fontSize = "19px";
                document.querySelector("#unitPriceBox").style.fontFamily = "Trade Gothic Condensed"
            }
            else {
                unitString = `${calcUnitPrice(unitAmt, unitType, parseFloat(salePrice), parseFloat(retailPrice), null, 1)}`;
                document.querySelector("#unitType").style.display = "block";
                document.querySelector("#unitType").innerHTML = suffix;
                document.querySelector("#unitPriceBox").style.fontSize = "60px";
                document.querySelector("#unitPriceBox").style.fontFamily = "Rockwell";
            }

            document.querySelector("#unitPriceBox").innerHTML = unitString;

            document.querySelector('#unit-size-suf').innerHTML = unit || '';

        }

        document.querySelectorAll('.tool-input').forEach(e=>{
            e.addEventListener('input', function() {
                refresh();
            })
        });
   </script>

    <script src="../../bulk_shared.js?v=1003"></script>
    <script src="../../sign_builder.js?v=1000"></script>
    <script>
        refresh();
    </script>
</body>

</html>